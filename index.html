<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Resume</title>
        <link href="css/style.css" rel="stylesheet">
        <script src="js/jQuery.js"></script>
        <script src="js/helper.js"></script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>
        <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script src="js/piechart-d3.js"></script>
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
            <!--Where the content of the page will go-->
        <div id="main">
            <div id="header" class="center-content clear-fix">
                <!-- where name, contact methods, and portrait go -->
                <ul id="topContacts" class="flex-box"></ul>
                <div>
                  <script>
                  /*pie chart I found through the d3 gallery at
                  https://github.com/mbostock/d3/wiki/Gallery */
                  var svg = d3.select("body")
                  	.append("svg")
                  	.append("g")

                  svg.append("g")
                  	.attr("class", "slices");
                  svg.append("g")
                  	.attr("class", "labels");
                  svg.append("g")
                  	.attr("class", "lines");

                  var width = 960,
                      height = 450,
                  	radius = Math.min(width, height) / 2;

                  var pie = d3.layout.pie()
                  	.sort(null)
                  	.value(function(d) {
                  		return d.value;
                  	});

                  var arc = d3.svg.arc()
                  	.outerRadius(radius * 0.8)
                  	.innerRadius(radius * 0.4);

                  var outerArc = d3.svg.arc()
                  	.innerRadius(radius * 0.9)
                  	.outerRadius(radius * 0.9);

                  svg.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

                  var key = function(d){ return d.data.label; };

                  var color = d3.scale.ordinal()
                  	.domain(["HTML", "CSS", "javascript", "illustration", "painting", "photography", "drawing"])
                  	.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);


                  function change(data) {

                  	/* ------- PIE SLICES -------*/
                  	var slice = svg.select(".slices").selectAll("path.slice")
                  		.data(pie(data), key);

                  	slice.enter()
                  		.insert("path")
                  		.style("fill", function(d) { return color(d.data.label); })
                  		.attr("class", "slice");

                  	slice
                  		.transition().duration(1000)
                  		.attrTween("d", function(d) {
                  			this._current = this._current || d;
                  			var interpolate = d3.interpolate(this._current, d);
                  			this._current = interpolate(0);
                  			return function(t) {
                  				return arc(interpolate(t));
                  			};
                  		})

                  	slice.exit()
                  		.remove();

                  	/* ------- TEXT LABELS -------*/

                  	var text = svg.select(".labels").selectAll("text")
                  		.data(pie(data), key);

                  	text.enter()
                  		.append("text")
                  		.attr("dy", ".35em")
                  		.text(function(d) {
                  			return d.data.label;
                  		});

                  	function midAngle(d){
                  		return d.startAngle + (d.endAngle - d.startAngle)/2;
                  	}

                  	text.transition().duration(1000)
                  		.attrTween("transform", function(d) {
                  			this._current = this._current || d;
                  			var interpolate = d3.interpolate(this._current, d);
                  			this._current = interpolate(0);
                  			return function(t) {
                  				var d2 = interpolate(t);
                  				var pos = outerArc.centroid(d2);
                  				pos[0] = radius * (midAngle(d2) < Math.PI ? 1 : -1);
                  				return "translate("+ pos +")";
                  			};
                  		})
                  		.styleTween("text-anchor", function(d){
                  			this._current = this._current || d;
                  			var interpolate = d3.interpolate(this._current, d);
                  			this._current = interpolate(0);
                  			return function(t) {
                  				var d2 = interpolate(t);
                  				return midAngle(d2) < Math.PI ? "start":"end";
                  			};
                  		});

                  	text.exit()
                  		.remove();

                  	/* ------- SLICE TO TEXT POLYLINES -------*/

                  	var polyline = svg.select(".lines").selectAll("polyline")
                  		.data(pie(data), key);

                  	polyline.enter()
                  		.append("polyline");

                  	polyline.transition().duration(1000)
                  		.attrTween("points", function(d){
                  			this._current = this._current || d;
                  			var interpolate = d3.interpolate(this._current, d);
                  			this._current = interpolate(0);
                  			return function(t) {
                  				var d2 = interpolate(t);
                  				var pos = outerArc.centroid(d2);
                  				pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1 : -1);
                  				return [arc.centroid(d2), outerArc.centroid(d2), pos];
                  			};
                  		});

                  	polyline.exit()
                  		.remove();
                  };
                  </script>
                  </div>
            </div>


            <div style="clear; both;"></div>
            <div id="workExperience">
                <h2>Work Experience</h2>
            </div>
            <div id="projects">
                <h2>Projects</h2>
            </div>
            <div id="education">
                <h2>Education</h2>
            </div>
            <div id="mapDiv">
                <h2>Where I've Lived and Worked</h2>
            </div>

        </div>

        <script src="js/resumeBuilder.js"></script>
        <script type="text/javascript">
            if(document.getElementsByClassName('flex-item').length === 0) {
                document.getElementById('topContacts').style.display = 'none';
            }
            if(document.getElementsByTagName('h1').length === 0) {
                document.getElementById('header').style.display = 'none';
            }

            if(document.getElementsByClassName('work-entry').length === 0){
                document.getElementById('workExperience').style.display = 'none';
            }
            if(document.getElementsByClassName('project-entry').length === 0) {
                document.getElementById('projects').style.display = 'none';
            }
            if(document.getElementsByClassName('education-entry').length === 0) {
                document.getElementById('education').style.display = 'none';
            }
            if(document.getElementsByClassName('flex-item').length === 0) {
                document.getElementById('lets-connect').style.display = 'none';
            }
            if(document.getElementById('map') === null) {
                document.getElementById('mapDiv').style.display = 'none';
            }
            
        </script>
    </body>
</html>
